var x$=function(e,t){if(!e)return[];else{if(e.nodeType)return[e];else return Array.prototype.slice.call((t||document).querySelectorAll(e))}};if(!JSON){var JSON={parse:function(str){return eval("("+str+")")}}}x$.EMPTY_FN=function(){};x$.browser=window.navigator.userAgent;x$.version="0.21";x$.byId=function(e){return document.getElementById(e)};x$.byClass=function(e,t){return(t||document).getElementsByClassName(e)};x$.byTag=function(e,t){return(t||document).getElementsByTagName(e)};x$.extend=function(){var e,t,i,n,s,r,a=arguments[0]||{},o=1,h=arguments.length,l=false;if(typeof a==="boolean"){l=a;a=arguments[1]||{};o=2}if(typeof a!=="object"&&!(typeof a==="function")){a={}}if(h===o){a=this;--o}for(;o<h;o++){if((e=arguments[o])!=null){for(t in e){i=a[t];n=e[t];if(a===n){continue}if(l&&n&&(Object.prototype.toString.call(n)==="[object Object]"||(s=n instanceof Array))){if(s){s=false;r=i&&i instanceof Array?i:[]}else{r=i&&Object.prototype.toString.call(i)==="[object Object]"?i:{}}a[t]=x$.extend(l,r,n)}else if(n!==undefined){a[t]=n}}}}return a};var log=x$.EMPTY_FN;x$.activeLog=function(e){if(e){document.write('<div id="divLog"></div>');var t=document.getElementById("divLog");window.log=function(){if(t.scrollHeight>600)t.innerHTML="";else t.innerHTML+="<p>";for(var e=0,i=arguments.length;e<i;e++){t.innerHTML+=arguments[e]+" "}}}else window.log=x$.EMPTY_FN};x$.hasClass=function(e,t){var i=" "+e.className+" ";return i.indexOf(" "+t+" ")>-1};x$.addClass=function(e,t){var i=" "+e.className+" ";if(i.indexOf(" "+t+" ")===-1)e.className+=(i?" ":"")+t};x$.removeClass=function(e,t){var i=" "+e.className+" ",n=" "+t+" ",s=i.indexOf(n);if(s>-1)e.className=i.substr(1,s)+i.substring(s+t.length+2,i.length-1)};x$.toggleClass=function(e,t){return x$[x$.hasClass(e,t)?"removeClass":"addClass"](e,t)};x$.attr=function(e,t,i){if(i!==undefined){return e.setAttribute(t,i)}else{return e.getAttribute(t)}};x$.formatJSON=function(){var e=/\{(\w*[:]*[=]*\w+)\}(?!})/g;return function(t,i){return t.replace(e,function(e,t,n){return i[t]})}}();x$.request=function(){var e={},t=window.location,i=t.search.replace(/^\?/,"").split("&"),n=i.length,s=0,r;for(;s<n;s++){if(!i[s])continue;r=i[s].split("=");e[r[0]]=r[1]}return e}();x$.getJSON=function(e){var t=[],i=0;e.ajaxSetup=function(e){i=e.timeout};e.cancelAllAjax=function(){for(var e=0,i=t.length;e<i;e++){t[e].abort()}};e.param=function(e){var t=[];for(var i in e){t[t.length]=i+"="+encodeURIComponent(e[i])}return t.join("&").replace(/%20/g,"+").replace(/%25/g,"%")};return function(n,s,r,a){var o,h;for(var l=0,u=t.length;l<u;l++){if(t[l].readyState==4||t[l].readyState==0){o=t[l];break}}if(!o){o=new XMLHttpRequest;t.push(o)}o.handleResp=o.handleErr=null;if(typeof s==="function"){o.handleResp=s;if(typeof r==="function")o.handleErr=r}else{o.handleResp=r;if(typeof a==="function")o.handleErr=a;n+=(n.indexOf("?")===-1?"?":"&")+e.param(s)}o.open("GET",n,true);o.setRequestHeader("X-Requested-With","XMLHttpRequest");function f(){if(o.readyState==4&&o.responseText){if(i&&h){clearTimeout(h);h=null}if(o.status===0||o.status==200){var e;try{e=JSON.parse(o.responseText)}catch(t){if(o.handleErr)o.handleErr(t.message,o.responseText)}o.handleResp(e,x$)}else{if(o.handleErr)o.handleErr("Server error: "+o.status,o.responseText)}}}o.onreadystatechange=f;o.send();if(i){h=setTimeout(function(){o.abort();h=null;if(o.handleErr)o.handleErr("timeout",i)},i)}return o}}(x$);x$.off=function(e){var t=false,i=x$.on.seeds;for(var n=0,s=i.length;n<s;n++){if(i[n]==e){i.splice(n,1);delete x$.on.listeners[e];t=true;break}}return t};x$.on=function(e,t,i){var n;if(i){n=--x$.on.seedMin;x$.on.seeds.unshift(n)}else{n=++x$.on.seedMax;x$.on.seeds.push(n)}x$.on.listeners[n]=t;return n};x$.once=function(e,t,i){var n=x$.on(e,function(e){x$.off(n);n=null;return t.call(window,e)},i);return n};x$.on.seeds=[];x$.on.seedMin=0;x$.on.seedMax=-1;x$.on.listeners={};x$.on.homepage="";document.onkeydown=function(e){var t=x$.on.listeners,i=x$.on.seeds.slice();for(var n=0,s=i.length;n<s;n++){var r=t[i[n]];var a=r.call(window,e);if(a===false)return a}if((e.keyCode==72||e.keyCode==27)&&x$.on.homepage){location.href=x$.on.homepage;return false}if(e.keyCode==8){history.back();return false}};(function(e){var t={m_Count:0,make:function(e){var t=e.template,i={name:t},n=e["null"]||"";pnter=/\w+[:=]+\w+/g,rnderFns=t.match(pnter),renderEvalStr='row[":index"]=i;';if(rnderFns){var s,r;for(var a=0;a<rnderFns.length;a++){s=rnderFns[a];r=s.indexOf(":=");renderEvalStr+="row['"+s+"']=scope['"+s.substr(r+2)+"'](row['"+s.substr(0,r)+"'] , i , row) ;"}}var o=/\{(\w*[:]*[=]*\w+)\}(?!})/g,h=t.replace(o,function(e,t,i){return"'+(row['"+t+"']===null?'"+n+"':row['"+t+"'])+'"});renderEvalStr+="var out='"+h+"';return out;";i["render"]=new Function("row","i","scope",renderEvalStr);if(e.itemRender)i.itemRender=e.itemRender;if(e.itemFilter)i.itemFilter=e.itemFilter;if(e.onBound)i.onBound=e.onBound;i["joiner"]=e.joiner||"";i["null"]=n;return i},newId:function(){return"_Object__bind_"+this.m_Count++},remove:function(e){delete this[e]}};e.bindList=function(i,n){if(!i.nodeType){i=e(i)[0]}var s=i.id||i.uniqueID||function(){i.id=t.newId();return i.id}();var r=t[s]||{},a,o,h,l,u;if(n instanceof Array){o=n;h=r.itemRender;l=r.itemFilter;mode=r.mode}else{a=n.template;if(a!==undefined&&r["name"]!=a){r=t.make(n);t[s]=r}o=n.list;h=n.itemRender||r.itemRender;l=n.itemFilter||r.itemFilter}var f=h||window,d=[],c=0,g=0,p,x=typeof l==="function";for(;p=o[c];){if(x)p=l(p,c);if(p){p[":rowNum"]=++g;d[c]=r["render"](p,c,f)}++c}i.innerHTML=d.join(r["joiner"]);if(typeof r.onBound==="function"){r.onBound.call(i,o,n)}return i};e.bindLists=function(i,n){var s;if(n.mode==="setCache")s=n.cache;else s=t.make(n);for(var r=0,a=i.length;r<a;r++){var o=i[r];var h=o.id||o.uniqueID||function(){o.id=t.newId();return o.id}();t[h]=s}var l=Math.min(a,n.lists.length);for(var u=0;u<l;u++){n.list=n.lists[u];e.bindList(i[u],n)}if(typeof n.onAllComplete==="function"){n.onAllComplete(n)}if(n.mode==="getCache")return s;return this}})(x$);(function(e,t,i){t.Grid=function(){var n=function(e){return new n.fn.init(e)},s={left:null,right:null,up:null,down:null};n.fn=n.prototype={init:function(e){var n=t.extend(true,{},this.defaults,e);this.edgeRule=n.edgeRule;this.keyMap=e.keyMap||this.defaults.keyMap;this.offset=n.offset;this.grid=n.grid;this.focus=n.focus;this.blur=n.blur;this.click=n.click;this.beforeChange=n.beforeChange;this.change=n.change;this.hover=n.hover;this.name=n.name;this.noData=n.noData;this.delayTime=n.delayTime;this.hoverClass=n.hoverClass?n.hoverClass:i;this.prevIndex=-1;this.selectedIndex=-1;this.boxIndex=-1;this.selector=n.selector;this.frame=t(n.frame)[0];this.elems(t(this.selector));if(e.forceRec instanceof Array){this.matrix=e.forceRec;this.forceRec=false}else{this.matrix=[];this.forceRec=e.forceRec||false;var s=this.forceRec;if(s&&typeof s!=="boolean"){if(s==="strict"&&this.length){var r=this.items[0].getBoundingClientRect();s={x:r.left+this.offset.x,y:r.top+this.offset.y,w:r.width,h:r.height}}var a,o,h=this.grid;for(var l=0,u=h.cols*h.rows;l<u;l++){a=l%h.cols*s.w+s.x;o=(l/h.cols|0)*s.h+s.y;this.matrix[l]={x:a,y:o}}this.forceRec=false}}if(this.length)this.setIndex(n.selectedIndex,"auto");return this},reset:function(e,i){this.elems(t(this.selector));this.prevIndex=this.selectedIndex=-1;if(!isNaN(e)&&this.length)this.setIndex(e,i||"auto");return this},elems:function(t){this.items=t;this.length=t.length;if(this.length===0){if(this.frame)this.frame.style.cssText+=";visibility:hidden;";if(this.noData)this.noData()}else if(this.frame&&e.getComputedStyle(this.frame,null).visibility=="hidden")this.frame.style.cssText+=";visibility:visible;";return this},jumpToBox:function(e,i){if(e===-1)t.Box.jumpBack();else t.Box.jumpTo(e,i);return this},addIntoBox:function(e){if(e)this.name=e;t.Box.addGrid(this);return this},overRange:function(e){if(this.edgeRule[e]==="stop")return this;switch(e){case"up":case"left":if(this.edgeRule[e]==="loop"){var t=this.selectedIndex-1;this.setIndex(t<0?this.length-1:t,e)}else{this.edgeRule[e].call(this,e)}break;case"down":case"right":if(this.edgeRule[e]==="loop"){var t=this.selectedIndex+1;this.setIndex(t>this.length-1?0:t,e)}else{this.edgeRule[e].call(this,e)}break;default:{}}return this},keyHandler:function(e){if(this.length!==0){var t=e.keyCode?e.keyCode:e.which;var i=this.keyMap[t];if(i){if(i==="ok"){if(this.click)this.click()}else if(i in s){var n=this.grid.cols,r=this.grid.rows;if(i==="left"&&this.selectedIndex%n===0||i==="right"&&(this.selectedIndex+1)%n===0||i==="up"&&this.selectedIndex<n||i==="down"&&this.selectedIndex+n+1>Math.min(r*n,this.length)){this.overRange.call(this,i)}else{var a=i==="left"?-1:i==="right"?1:i==="up"?-n:n;this.setIndex(this.selectedIndex+a,i)}}}}return this},setIndex:function(e,i){if(this.beforeChange)this.beforeChange(i);if(e<0||e+1>this.length)this.overRange.call(this,i);else{clearTimeout(this.timer);this.prevIndex=this.selectedIndex;this.selectedIndex=e;var n=this.frame,s;if(n){if(!this.matrix[e]||this.forceRec){var r=this.items[e].getBoundingClientRect();s={x:r.left+this.offset.x,y:r.top+this.offset.y};this.matrix[e]=s}else{s=this.matrix[e]}if(this.grid.rows>1&&i||i=="auto")n.style.cssText+=";top:"+s.y+"px;";if(this.grid.cols>1&&i||i=="auto")n.style.cssText+=";left:"+s.x+"px;"}if(this.hover&&i)this.delay(this,this.hover,this.delayTime,i);if(this.change)this.change(i);if(i!="auto"&&this.hoverClass){var a=this.prevElem();if(a)t.removeClass(a,this.hoverClass);a=this.selectedElem();t.addClass(a,this.hoverClass)}}return this},prevElem:function(){return this.items[this.prevIndex]},selectedElem:function(){return this.items[this.selectedIndex]},timer:0,defaults:{edgeRule:{up:"stop",down:"stop",left:"stop",right:"stop"},hover:null,focus:function(){if(this.frame)this.frame.style.cssText+=";display:block;";if(this.hoverClass)t.addClass(this.selectedElem(),this.hoverClass);return this},blur:function(){if(this.frame)this.frame.style.cssText+=";display:none;";if(this.hoverClass)t.removeClass(this.selectedElem(),this.hoverClass);return this},keyMap:{37:"left",39:"right",38:"up",40:"down",13:"ok"},offset:{x:0,y:0},grid:{cols:1,rows:1},selectedIndex:0,delayTime:1e3,items:null,frame:null},delay:function(e,i,n,s){t.Grid.delayFunc=function(){i.call(e,s)};this.timer=setTimeout(t.Grid.delayFunc,n)}};n.fn.init.prototype=n.fn;return n}();t.Box={boxes:[],current:null,currentIndex:-1,enable:true,eventName:"keydown",gridMap:{},previous:null,previousIndex:-1,getGrid:function(e){if(typeof e==="string"){e=this.gridMap[e];if(e==i)e=-1}return this.boxes[e]},addGrid:function(e){for(var t=0,i=arguments.length;t<i;t++){if(arguments[t].name)this.gridMap[arguments[t].name]=this.boxes.length;arguments[t].boxIndex=this.boxes.length;this.boxes.push(arguments[t])}return this},removeGrid:function(e){if(this.currentIndex===e){this.current=null;this.currentIndex=-1;if(this.previous){this.jumpTo(this.previous);this.previous=null;this.previousIndex=-1}}this.boxes.splice(e,1);return this},jumpTo:function(e,n){if(e instanceof t.Grid){e=e.boxIndex}else if(typeof e==="string"){e=this.gridMap[e];if(e==i)e=this.currentIndex}if(e===-1)e=this.previousIndex;var s=this.boxes[e];if(this.current!=s){if(s.length){if(this.current){this.current.blur();this.previous=this.current;this.previousIndex=this.currentIndex}this.current=s;this.currentIndex=e;if(n!=i)this.current.setIndex(n,"sync");this.current.focus()}}return this},jumpBack:function(){return this.jumpTo(this.previousIndex)},keyHolder:function(e){var i=t.Box;if(i.enable&&i.currentIndex!=-1)i.current.keyHandler(e)},active:function(e){if(this.currentIndex===-1&&this.boxes.length){this.jumpTo(0)}this.eventName=e||this.eventName;t.on(this.eventName,this.keyHolder);return this},inactive:function(){document.removeEventListener(this.eventName,this.keyHolder);return this},reset:function(e,t,n){if(e&&this.current)this.current.blur();this.current=this.previous=null;this.currentIndex=this.previousIndex=-1;if(t!==i)this.jumpTo(t,n)}};var n=function(e){return new n.fnc(e)};n.fnc=function(e){this.container=t(e.container)[0];this.pageDiv=t(e.pageDiv)[0];this.template=e.template;this.itemRender=e.itemRender;this.itemFilter=e.itemFilter;this.pageSize=e.pageSize||5;this.singlePage=e.singlePage;this.pagination=e.pagination;this.noData=e.noData;this.bound=e.bound;this.reBind(e);return this};n.fnc.prototype={selectedItem:function(e){return this.data[this.pageIndex*this.pageSize+e]},reBind:function(e){this.data=e.data;if(this.data){this.length=e.data.length;var t=e.pageIndex||0;this.pageCount=Math.ceil(this.length/this.pageSize);this.pageIndex=Math.min(this.pageCount-1,t);if(this.pageCount===1&&this.singlePage)this.singlePage();if(this.length){this.bindPage(this.pageIndex*this.pageSize);if(this.bound)this.bound()}else{this.container[0].innerHTML="";if(this.noData)this.noData()}}return this},turnPage:function(e){if(e>0){this.pageIndex=this.pageIndex+e>=this.pageCount?0:this.pageIndex+e}else{this.pageIndex=this.pageIndex-e<0?this.pageCount-1:this.pageIndex-e}this.bindPage()},gotoPage:function(e){e=parseInt(e,10);if(!isNaN(e)){if(e>this.pageCount-1)e=this.pageCount-1;else if(e<0)e=0;this.pageIndex=e;this.bindPage()}},nextPage:function(){this.pageIndex=this.pageIndex+1===this.pageCount?0:this.pageIndex+1;this.bindPage()},prevPage:function(){this.pageIndex=this.pageIndex===0?this.pageCount-1:this.pageIndex-1;this.bindPage()},bindPage:function(){var e=this.pageIndex*this.pageSize;t.bindList(this.container,{template:this.template,itemRender:this.itemRender,itemFilter:this.itemFilter,list:this.pageArray(this.data,e,this.pageSize)});if(this.pageDiv){this.pageDiv.style.cssText+=";display:block;";if(this.pagination){if(typeof this.pagination==="function"){this.pageDiv.innerHTML=this.pagination.call(this,this.pageIndex+1,this.pageCount,this.length)}else this.pageDiv.innerHTML=t.formatJSON(this.pagination,{pageIndex:this.pageIndex+1,pageCount:this.pageCount,rows:this.length})}else{this.pageDiv.innerText=this.pageIndex+1+"/"+this.pageCount+" "+unescape("%u9875")}}return this},pageArray:function(e,t,i){var n=e.length;var s=t+i>n?n%i:i;return e.slice(t,t+s)}};t.PageList=n;t.Grid.fn.extra=t.Grid.prototype.extra=t.Grid.fn.init.prototype.extra=n.fnc.prototype.extra=function(e,t){for(var n in e){if(this[n]===i||t)this[n]=e[n]}return this}})(window,x$);